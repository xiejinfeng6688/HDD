<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/fromann/CDN@main/img/logo.ico">
    <title>æ˜¯ç»™ä¸ä¸çš„&#10084;&#65039;</title>
    <script src="mouse_slide.js"></script>
    <script src="clicklove.js"></script>
  <style type="text/css">
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
    
    html, body {
      height: 100%;
      padding: 0;
      margin: 0;
      background: linear-gradient(135deg, #000000 0%, #1a0a1a 50%, #000000 100%);
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    canvas {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .namebox{
      color: #fff;
      position: absolute;   
            top: 50%;   
            left: 50%;   
            -webkit-transform: translate(-50%, -50%);   
            -moz-transform: translate(-50%, -50%);   
            -ms-transform: translate(-50%, -50%);   
            -o-transform: translate(-50%, -50%);   
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
    }
    .namebox h1{
      margin: 0 auto 20px;
      font-size: 3em;
      font-weight: bold;
      background: linear-gradient(45deg, #ff30c5, #ff6b9d, #ff30c5, #c4b5fd);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradient 3s ease infinite, breathe 2s ease-in-out infinite;
      text-shadow: 0 0 30px rgba(255, 48, 197, 0.5);
      letter-spacing: 0.1em;
    }
    
    .days-together {
      font-size: 1.2em;
      color: #ff6b9d;
      margin-top: 10px;
      animation: fadeIn 2s ease-in;
      text-shadow: 0 0 10px rgba(255, 107, 157, 0.8);
    }
    
    .hint-text {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9em;
      animation: float 3s ease-in-out infinite;
      z-index: 10;
      cursor: pointer;
    }
    
    /* ç›¸å†ŒæŒ‰é’®æ ·å¼ */
    .photo-button {
      position: absolute;
      top: 30px;
      right: 30px;
      background: linear-gradient(135deg, #ff30c5, #ff6b9d);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      font-size: 1em;
      cursor: pointer;
      z-index: 10;
      box-shadow: 0 5px 15px rgba(255, 48, 197, 0.4);
      transition: all 0.3s ease;
      animation: pulse 2s ease-in-out infinite;
    }
    
    .photo-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 48, 197, 0.6);
    }
    
    @keyframes pulse {
      0%, 100% { 
        transform: scale(1); 
        box-shadow: 0 5px 15px rgba(255, 48, 197, 0.4);
      }
      50% { 
        transform: scale(1.05); 
        box-shadow: 0 8px 25px rgba(255, 48, 197, 0.6);
      }
    }
    
    /* æƒ…ä¹¦å¼¹çª—æ ·å¼ */
    .love-letter-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeIn 0.5s ease;
    }
    
    .love-letter-overlay.show {
      display: flex;
    }
    
    .love-letter {
      background: linear-gradient(135deg, #fff5f5 0%, #ffe6f0 100%);
      padding: 40px 50px;
      border-radius: 20px;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(255, 48, 197, 0.4);
      position: relative;
      animation: slideIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      border: 2px solid rgba(255, 107, 157, 0.3);
    }
    
    .letter-header {
      text-align: center;
      margin-bottom: 25px;
      font-size: 2em;
      color: #ff30c5;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(255, 107, 157, 0.3);
    }
    
    .letter-content {
      font-size: 1.1em;
      line-height: 2;
      color: #333;
      text-align: left;
      font-family: 'KaiTi', 'æ¥·ä½“', serif;
    }
    
    .letter-content p {
      margin: 15px 0;
      text-indent: 2em;
    }
    
    .letter-signature {
      text-align: right;
      margin-top: 30px;
      font-size: 1.1em;
      color: #ff30c5;
      font-style: italic;
    }
    
    .close-letter {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 2em;
      color: #ff6b9d;
      cursor: pointer;
      transition: all 0.3s ease;
      background: none;
      border: none;
      line-height: 1;
    }
    
    .close-letter:hover {
      color: #ff30c5;
      transform: rotate(90deg);
    }
    
    /* ç…§ç‰‡ç›¸å†Œå¼¹çª—æ ·å¼ */
    .photo-gallery-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      animation: fadeIn 0.5s ease;
    }
    
    .photo-gallery-overlay.show {
      display: flex;
    }
    
    .photo-gallery {
      max-width: 900px;
      width: 90%;
      max-height: 90vh;
      position: relative;
      animation: slideIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    .photo-slider {
      position: relative;
      width: 100%;
      overflow: hidden;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(255, 48, 197, 0.5);
    }
    
    .photo-slides {
      display: flex;
      transition: transform 0.5s ease-in-out;
    }
    
    .photo-slide {
      min-width: 100%;
      position: relative;
    }
    
    .photo-slide img {
      width: 100%;
      height: auto;
      max-height: 70vh;
      object-fit: contain;
      display: block;
      background: #000;
    }
    
    .photo-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      color: white;
      padding: 30px 20px 20px;
      font-size: 1.2em;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    }
    
    .slider-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 48, 197, 0.8);
      color: white;
      border: none;
      font-size: 2em;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }
    
    .slider-nav:hover {
      background: rgba(255, 48, 197, 1);
      transform: translateY(-50%) scale(1.1);
    }
    
    .slider-nav.prev {
      left: 20px;
    }
    
    .slider-nav.next {
      right: 20px;
    }
    
    .close-gallery {
      position: absolute;
      top: -50px;
      right: 0;
      font-size: 2.5em;
      color: white;
      cursor: pointer;
      background: none;
      border: none;
      transition: all 0.3s ease;
      z-index: 11;
    }
    
    .close-gallery:hover {
      color: #ff30c5;
      transform: rotate(90deg);
    }
    
    .photo-indicators {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
    }
    
    .indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .indicator.active {
      background: #ff30c5;
      transform: scale(1.3);
    }
    
    @keyframes slideIn {
      from {
        transform: scale(0.5) translateY(-100px);
        opacity: 0;
      }
      to {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }
    
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateX(-50%) translateY(0px); }
      50% { transform: translateX(-50%) translateY(-10px); }
    }
    
    /* æ€§èƒ½ä¼˜åŒ–æ¨¡å¼ */
    .reduce-motion *,
    .low-battery * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    /* åŠ è½½å®Œæˆåçš„ä¼˜åŒ– */
    body:not(.loaded) .namebox,
    body:not(.loaded) .hint-text,
    body:not(.loaded) .photo-button {
      opacity: 0;
    }
    
    body.loaded .namebox,
    body.loaded .hint-text,
    body.loaded .photo-button {
      opacity: 1;
      transition: opacity 0.5s ease-in;
    }
    
    /* å“åº”å¼è®¾è®¡ - è¶…å°å±å¹•ï¼ˆæ‰‹æœºç«–å±ï¼Œ<576pxï¼‰ */
    @media (max-width: 575px) {
      .namebox h1 {
        font-size: 1.8em;
        margin-bottom: 15px;
        letter-spacing: 0.05em;
      }
      .days-together {
        font-size: 0.9em;
      }
      .love-letter {
        padding: 25px 20px;
        max-width: 95%;
        max-height: 85vh;
        overflow-y: auto;
      }
      .letter-header {
        font-size: 1.3em;
        margin-bottom: 20px;
      }
      .letter-content {
        font-size: 0.95em;
        line-height: 1.8;
      }
      .letter-content p {
        margin: 12px 0;
      }
      .hint-text {
        font-size: 0.75em;
        bottom: 15px;
        padding: 0 15px;
        text-align: center;
      }
      .photo-button {
        top: 10px;
        right: 10px;
        padding: 8px 16px;
        font-size: 0.85em;
      }
      .slider-nav {
        width: 35px;
        height: 35px;
        font-size: 1.3em;
      }
      .slider-nav.prev {
        left: 5px;
      }
      .slider-nav.next {
        right: 5px;
      }
      .photo-caption {
        font-size: 0.9em;
        padding: 20px 12px 12px;
      }
      .close-gallery {
        top: -35px;
        right: 0;
        font-size: 1.8em;
      }
      .close-letter {
        top: 10px;
        right: 15px;
        font-size: 1.8em;
      }
      .photo-gallery {
        max-width: 95%;
      }
      .photo-slide img {
        max-height: 60vh;
      }
      .photo-indicators {
        bottom: 10px;
        gap: 8px;
      }
      .indicator {
        width: 10px;
        height: 10px;
      }
    }
    
    /* å°å±å¹•ï¼ˆæ‰‹æœºæ¨ªå±ï¼Œ576px-767pxï¼‰ */
    @media (min-width: 576px) and (max-width: 767px) {
      .namebox h1 {
        font-size: 2.2em;
      }
      .days-together {
        font-size: 1em;
      }
      .love-letter {
        padding: 30px 25px;
        max-width: 90%;
      }
      .letter-header {
        font-size: 1.6em;
      }
      .letter-content {
        font-size: 1em;
        line-height: 1.8;
      }
      .hint-text {
        font-size: 0.85em;
        bottom: 20px;
      }
      .photo-button {
        top: 12px;
        right: 12px;
        padding: 10px 18px;
        font-size: 0.9em;
      }
      .slider-nav {
        width: 40px;
        height: 40px;
        font-size: 1.5em;
      }
      .slider-nav.prev {
        left: 8px;
      }
      .slider-nav.next {
        right: 8px;
      }
      .photo-caption {
        font-size: 1em;
        padding: 20px 15px 15px;
      }
      .close-gallery {
        top: -40px;
        font-size: 2em;
      }
    }
    
    /* ä¸­ç­‰å±å¹•ï¼ˆå¹³æ¿ï¼Œ768px-991pxï¼‰ */
    @media (min-width: 768px) and (max-width: 991px) {
      .namebox h1 {
        font-size: 2.5em;
      }
      .days-together {
        font-size: 1.1em;
      }
      .love-letter {
        padding: 35px 35px;
        max-width: 85%;
      }
      .letter-header {
        font-size: 1.8em;
      }
      .letter-content {
        font-size: 1.05em;
        line-height: 1.9;
      }
      .hint-text {
        font-size: 0.9em;
      }
      .photo-button {
        top: 20px;
        right: 20px;
        padding: 11px 22px;
        font-size: 0.95em;
      }
      .slider-nav {
        width: 45px;
        height: 45px;
        font-size: 1.7em;
      }
      .slider-nav.prev {
        left: 15px;
      }
      .slider-nav.next {
        right: 15px;
      }
    }
    
    /* å¤§å±å¹•ï¼ˆå°å‹æ¡Œé¢ï¼Œ992px-1199pxï¼‰ */
    @media (min-width: 992px) and (max-width: 1199px) {
      .namebox h1 {
        font-size: 2.8em;
      }
      .love-letter {
        max-width: 700px;
      }
    }
    
    /* è¶…å¤§å±å¹•ï¼ˆå¤§å‹æ¡Œé¢ï¼Œ>=1200pxï¼‰ */
    @media (min-width: 1200px) {
      .namebox h1 {
        font-size: 3em;
      }
      .love-letter {
        max-width: 750px;
      }
    }
    
    /* æ¨ªå±ä¼˜åŒ– */
    @media (max-height: 600px) and (orientation: landscape) {
      .namebox h1 {
        font-size: 1.8em;
        margin-bottom: 10px;
      }
      .days-together {
        font-size: 0.9em;
      }
      .hint-text {
        bottom: 10px;
        font-size: 0.75em;
      }
      .photo-button {
        top: 8px;
        right: 8px;
        padding: 6px 14px;
        font-size: 0.8em;
      }
      .love-letter {
        max-height: 90vh;
        overflow-y: auto;
        padding: 20px 30px;
      }
      .letter-header {
        font-size: 1.4em;
        margin-bottom: 15px;
      }
      .letter-content {
        font-size: 0.9em;
        line-height: 1.6;
      }
      .letter-content p {
        margin: 10px 0;
      }
      .photo-slide img {
        max-height: 75vh;
      }
      .photo-caption {
        padding: 15px 10px 10px;
        font-size: 0.9em;
      }
      .slider-nav {
        width: 35px;
        height: 35px;
        font-size: 1.3em;
      }
    }
    
    /* è§¦æ‘¸è®¾å¤‡ä¼˜åŒ– */
    @media (hover: none) and (pointer: coarse) {
      .photo-button,
      .slider-nav,
      .close-letter,
      .close-gallery,
      .hint-text {
        min-width: 44px;
        min-height: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      
      .indicator {
        min-width: 44px;
        min-height: 44px;
      }
    }
    
    /* é«˜åˆ†è¾¨ç‡å±å¹•ä¼˜åŒ– */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .namebox h1,
      .letter-content,
      .photo-caption {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    }
  </style>

</head>
<body>
<canvas id="pinkboard"></canvas>
<script>
  var settings = {
    particles: {
      length: 800, // maximum amount of particles (å¢åŠ ç²’å­æ•°é‡)
      duration: 2, // particle duration in sec
      velocity: 100, // particle velocity in pixels/sec
      effect: -0.75, // play with this for a nice effect
      size: 32, // particle size in pixels (ç¨å¾®å¢å¤§)
    },
  };
  (
          function(){
            var b=0;
            var c=["ms","moz","webkit","o"];
            for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){
              window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];
              window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]
            }
            if(!window.requestAnimationFrame){
              window.requestAnimationFrame=function(h,e){
                var d=new Date().getTime();
                var f=Math.max(0,16-(d-b));
                var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());
  var Point = (function() {
    function Point(x, y) {
      this.x = (typeof x !== 'undefined') ? x : 0;
      this.y = (typeof y !== 'undefined') ? y : 0;
    }
    Point.prototype.clone = function() {
      return new Point(this.x, this.y);
    };
    Point.prototype.length = function(length) {
      if (typeof length == 'undefined')
        return Math.sqrt(this.x * this.x + this.y * this.y);
      this.normalize();
      this.x *= length;
      this.y *= length;
      return this;
    };

    Point.prototype.normalize = function() {
      var length = this.length();
      this.x /= length;
      this.y /= length;
      return this;
    };
    return Point;
  })();

  var Particle = (function() {
    function Particle() {
      this.position = new Point();
      this.velocity = new Point();
      this.acceleration = new Point();
      this.age = 0;
    }
    Particle.prototype.initialize = function(x, y, dx, dy) {
      this.position.x = x;
      this.position.y = y;
      this.velocity.x = dx;
      this.velocity.y = dy;
      this.acceleration.x = dx * settings.particles.effect;
      this.acceleration.y = dy * settings.particles.effect;
      this.age = 0;
    };
    Particle.prototype.update = function(deltaTime) {
      this.position.x += this.velocity.x * deltaTime;
      this.position.y += this.velocity.y * deltaTime;
      this.velocity.x += this.acceleration.x * deltaTime;
      this.velocity.y += this.acceleration.y * deltaTime;
      this.age += deltaTime;
    };

    Particle.prototype.draw = function(context, image) {
      function ease(t) {
        return (--t) * t * t + 1;
      }
      var size = image.width * ease(this.age / settings.particles.duration);
      context.globalAlpha = 1 - this.age / settings.particles.duration;
      context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
    };
    return Particle;
  })();
  /*

  * ParticlePool class

  */
  var ParticlePool = (function() {
    var particles,
            firstActive = 0,
            firstFree = 0,
            duration = settings.particles.duration;
    function ParticlePool(length) {
// create and populate particle pool
      particles = new Array(length);
      for (var i = 0; i < particles.length; i++)
        particles[i] = new Particle();
    }
    ParticlePool.prototype.add = function(x, y, dx, dy) {
      particles[firstFree].initialize(x, y, dx, dy);
// handle circular queue
      firstFree++;
      if (firstFree == particles.length) firstFree = 0;
      if (firstActive == firstFree ) firstActive++;
      if (firstActive == particles.length) firstActive = 0;
    };
    ParticlePool.prototype.update = function(deltaTime) {
      var i;
// update active particles
      if (firstActive < firstFree) {
        for (i = firstActive; i < firstFree; i++)
          particles[i].update(deltaTime);
      }
      if (firstFree < firstActive) {
        for (i = firstActive; i < particles.length; i++)
          particles[i].update(deltaTime);
        for (i = 0; i < firstFree; i++)
          particles[i].update(deltaTime);
      }
// remove inactive particles
      while (particles[firstActive].age >= duration && firstActive != firstFree) {
        firstActive++;
        if (firstActive == particles.length) firstActive = 0;
      }
    };
    ParticlePool.prototype.draw = function(context, image) {
// draw active particles
      if (firstActive < firstFree) {
        for (i = firstActive; i < firstFree; i++)
          particles[i].draw(context, image);
      }
      if (firstFree < firstActive) {
        for (i = firstActive; i < particles.length; i++)
          particles[i].draw(context, image);
        for (i = 0; i < firstFree; i++)
          particles[i].draw(context, image);
      }
    };
    return ParticlePool;
  })();
  /*

  * Putting it all together

  */
  (function(canvas) {
    var context = canvas.getContext('2d'),
            particles = new ParticlePool(settings.particles.length),
            particleRate = settings.particles.length / settings.particles.duration, // particles/sec
            time;
// get point on heart with -PI <= t <= PI
    function pointOnHeart(t) {
      return new Point(
              160 * Math.pow(Math.sin(t), 3),
              130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
      );

    }

// creating the particle image using a dummy canvas

    var image = (function() {
      var canvas = document.createElement('canvas'),
              context = canvas.getContext('2d');
      canvas.width = settings.particles.size;
      canvas.height = settings.particles.size;
// helper function to create the path
      function to(t) {
        var point = pointOnHeart(t);
        point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;
        point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;
        return point;
      }
// create the path
      context.beginPath();
      var t = -Math.PI;
      var point = to(t);
      context.moveTo(point.x, point.y);
      while (t < Math.PI) {
        t += 0.01; // baby steps!
        point = to(t);
        context.lineTo(point.x, point.y);
      }
      context.closePath();
// create the fill with gradient
      var gradient = context.createLinearGradient(0, 0, settings.particles.size, settings.particles.size);
      gradient.addColorStop(0, '#ff30c5');
      gradient.addColorStop(0.5, '#ff6b9d');
      gradient.addColorStop(1, '#c4b5fd');
      context.fillStyle = gradient;
      context.fill();
// create the image
      var image = new Image();
      image.src = canvas.toDataURL();
      return image;
    })();
// render that thing!
    function render() {
// next animation frame
      requestAnimationFrame(render);
// update time
      var newTime = new Date().getTime() / 1000,
              deltaTime = newTime - (time || newTime);
      time = newTime;
// clear canvas
      context.clearRect(0, 0, canvas.width, canvas.height);
// create new particles
      var amount = particleRate * deltaTime;
      for (var i = 0; i < amount; i++) {
        var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
        var dir = pos.clone().length(settings.particles.velocity);
        particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
      }
// update and draw particles
      particles.update(deltaTime);
      particles.draw(context, image);
    }
// handle (re-)sizing of the canvas
    function onResize() {
      canvas.width = canvas.clientWidth;
      canvas.height = canvas.clientHeight;
    }
    window.onresize = onResize;
// delay rendering bootstrap
    setTimeout(function() {
      onResize();
      render();
    }, 10);
  })(document.getElementById('pinkboard'));
</script>
<div class="namebox">
  <h1>HDD&#10084;&#65039;XJF</h1>
  <div class="days-together" id="days"></div>
</div>
<div class="hint-text" onclick="openLetter()">ğŸ’• ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®ï¼Œä¼šæœ‰æƒŠå–œå“¦ ğŸ’•</div>
<button class="photo-button" onclick="openGallery()">ğŸ“¸ æˆ‘ä»¬çš„å›å¿†</button>

<!-- æƒ…ä¹¦å¼¹çª— -->
<div class="love-letter-overlay" id="letterOverlay" onclick="closeLetter()">
  <div class="love-letter" onclick="event.stopPropagation()">
    <button class="close-letter" onclick="closeLetter()">Ã—</button>
    <div class="letter-header">ğŸ’Œ ç»™æœ€çˆ±çš„HDD ğŸ’Œ</div>
    <div class="letter-content">
      <p>äº²çˆ±çš„HDDï¼š</p>
      <p>é‡è§ä½ ï¼Œæ˜¯å¾ˆç¾å¥½çš„äº‹ã€‚ä½ çš„ç¬‘å®¹åƒé˜³å…‰ä¸€æ ·æ¸©æš–ï¼Œç…§äº®äº†æˆ‘çš„æ•´ä¸ªä¸–ç•Œã€‚</p>
      <p>æˆ‘æƒ³å¯¹ä½ è¯´ï¼šæˆ‘ä¼šç”¨å¿ƒå»çˆ±ä½ ã€çæƒœä½ ã€å‘µæŠ¤ä½ ã€‚æ— è®ºé‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œæˆ‘éƒ½ä¼šé™ªåœ¨ä½ èº«è¾¹ï¼Œå¯¹ä½ æœ‰è¶³å¤Ÿçš„è€å¿ƒï¼Œæ°¸è¿œç«™åœ¨ä½ è¿™è¾¹ã€‚</p>
      <p>æˆ‘ä¼šåŠªåŠ›æˆä¸ºæ›´å¥½çš„äººï¼Œåªä¸ºé…å¾—ä¸Šä½ ã€‚ä¼šåœ¨ä½ éš¾è¿‡æ—¶ç»™ä½ æ¸©æš–çš„æ‹¥æŠ±ï¼Œåœ¨ä½ å¼€å¿ƒæ—¶é™ªä½ ç¬‘ï¼Œåœ¨ä½ éœ€è¦æ—¶æ°¸è¿œéƒ½åœ¨ã€‚</p>
      <p>ä½™ç”Ÿå¾ˆé•¿ï¼Œæˆ‘æƒ³å’Œä½ ä¸€èµ·èµ°è¿‡æ¯ä¸€ä¸ªæ˜¥å¤ç§‹å†¬ï¼Œçœ‹éä¸–é—´ç¾æ™¯ï¼Œå°éäººé—´ç¾é£Ÿï¼ŒæŠŠæ¯ä¸€å¤©éƒ½è¿‡æˆæƒ…äººèŠ‚ã€‚</p>
      <p>æˆ‘çˆ±ä½ ï¼Œä¸æ­¢ä»Šå¤©ï¼Œæ˜¯æ¯ä¸€å¤©ã€‚ğŸ’•</p>
      <div class="letter-signature">
        â€”â€” çˆ±ä½ çš„ XJF<br>
        <span style="font-size: 0.9em;">â¤ï¸ æ¢¦å¼€å§‹çš„æ—¥å­2025å¹´11æœˆ3æ—¥ â¤ï¸</span>
      </div>
    </div>
  </div>
</div>

<!-- ç…§ç‰‡ç›¸å†Œå¼¹çª— -->
<div class="photo-gallery-overlay" id="galleryOverlay" onclick="closeGallery()">
  <div class="photo-gallery" onclick="event.stopPropagation()">
    <button class="close-gallery" onclick="closeGallery()">Ã—</button>
    <div class="photo-slider">
      <div class="photo-slides" id="photoSlides">
        <div class="photo-slide">
          <img src="rose.jpg" alt="ç«ç‘°èŠ±">
          <div class="photo-caption">ğŸŒ¹ ä¸ºä½ å‡†å¤‡çš„ç«ç‘°ï¼Œæ„¿ä½ æ¯å¤©éƒ½åƒèŠ±å„¿ä¸€æ ·ç¾ä¸½ ğŸŒ¹</div>
        </div>
        <div class="photo-slide">
          <img src="together.jpg" alt="åœ¨ä¸€èµ·">
          <div class="photo-caption">ğŸ’• æˆ‘ä»¬åœ¨ä¸€èµ·çš„ç¾å¥½æ—¶å…‰ï¼Œæ¯ä¸€åˆ»éƒ½å€¼å¾—çè— ğŸ’•</div>
        </div>
      </div>
      <button class="slider-nav prev" onclick="changeSlide(-1)">â€¹</button>
      <button class="slider-nav next" onclick="changeSlide(1)">â€º</button>
      <div class="photo-indicators">
        <span class="indicator active" onclick="goToSlide(0)"></span>
        <span class="indicator" onclick="goToSlide(1)"></span>
      </div>
    </div>
  </div>
</div>

<script>
  // è®¡ç®—åœ¨ä¸€èµ·çš„å¤©æ•° - è¯·ä¿®æ”¹ä¸ºä½ ä»¬çš„çºªå¿µæ—¥
  function calculateDays() {
    const startDate = new Date('2025-11-3'); // ä¿®æ”¹ä¸ºä½ ä»¬çš„çºªå¿µæ—¥
    const today = new Date();
    const diffTime = Math.abs(today - startDate);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    document.getElementById('days').innerHTML = `ç­¾è®¢åˆä½œæ„å‘çš„ç¬¬ <strong>${diffDays}</strong> å¤© â¤ï¸`;
  }
  
  // é¡µé¢åŠ è½½æ—¶è®¡ç®—å¤©æ•°
  window.addEventListener('load', calculateDays);
  
  // æ‰“å¼€æƒ…ä¹¦
  function openLetter() {
    const overlay = document.getElementById('letterOverlay');
    overlay.classList.add('show');
    // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
    document.body.style.overflow = 'hidden';
  }
  
  // å…³é—­æƒ…ä¹¦
  function closeLetter() {
    const overlay = document.getElementById('letterOverlay');
    overlay.classList.remove('show');
    // æ¢å¤èƒŒæ™¯æ»šåŠ¨
    if (!document.getElementById('galleryOverlay').classList.contains('show')) {
      document.body.style.overflow = 'hidden';
    }
  }
  
  // ç‚¹å‡»canvasä¹Ÿèƒ½æ‰“å¼€æƒ…ä¹¦
  document.getElementById('pinkboard').addEventListener('click', function(e) {
    openLetter();
  });
  
  // ESCé”®å…³é—­æƒ…ä¹¦
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeLetter();
      closeGallery();
    }
  });
  
  // ç…§ç‰‡ç›¸å†ŒåŠŸèƒ½
  let currentSlide = 0;
  const slides = document.querySelectorAll('.photo-slide');
  const indicators = document.querySelectorAll('.indicator');
  
  // æ‰“å¼€ç…§ç‰‡ç›¸å†Œ
  function openGallery() {
    const overlay = document.getElementById('galleryOverlay');
    overlay.classList.add('show');
    currentSlide = 0;
    updateSlidePosition();
    // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
    document.body.style.overflow = 'hidden';
    // é˜»æ­¢è§¦æ‘¸ç§»åŠ¨äº‹ä»¶å†’æ³¡
    overlay.addEventListener('touchmove', preventScroll, { passive: false });
  }
  
  // å…³é—­ç…§ç‰‡ç›¸å†Œ
  function closeGallery() {
    const overlay = document.getElementById('galleryOverlay');
    overlay.classList.remove('show');
    // æ¢å¤èƒŒæ™¯æ»šåŠ¨
    if (!document.getElementById('letterOverlay').classList.contains('show')) {
      document.body.style.overflow = 'hidden';
    }
    // ç§»é™¤è§¦æ‘¸äº‹ä»¶ç›‘å¬
    overlay.removeEventListener('touchmove', preventScroll);
  }
  
  // é˜²æ­¢æ»šåŠ¨ç©¿é€
  function preventScroll(e) {
    const target = e.target;
    const isScrollable = target.scrollHeight > target.clientHeight;
    if (!isScrollable) {
      e.preventDefault();
    }
  }
  
  // åˆ‡æ¢ç…§ç‰‡
  function changeSlide(direction) {
    currentSlide += direction;
    if (currentSlide >= slides.length) {
      currentSlide = 0;
    }
    if (currentSlide < 0) {
      currentSlide = slides.length - 1;
    }
    updateSlidePosition();
  }
  
  // è·³è½¬åˆ°æŒ‡å®šç…§ç‰‡
  function goToSlide(index) {
    currentSlide = index;
    updateSlidePosition();
  }
  
  // æ›´æ–°ç…§ç‰‡ä½ç½®å’ŒæŒ‡ç¤ºå™¨
  function updateSlidePosition() {
    const slidesContainer = document.getElementById('photoSlides');
    slidesContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
    
    // æ›´æ–°æŒ‡ç¤ºå™¨
    indicators.forEach((indicator, index) => {
      if (index === currentSlide) {
        indicator.classList.add('active');
      } else {
        indicator.classList.remove('active');
      }
    });
  }
  
  // è‡ªåŠ¨æ’­æ”¾ï¼ˆå¯é€‰ï¼‰
  let autoPlayInterval;
  
  function startAutoPlay() {
    autoPlayInterval = setInterval(() => {
      changeSlide(1);
    }, 5000); // æ¯5ç§’åˆ‡æ¢ä¸€æ¬¡
  }
  
  function stopAutoPlay() {
    clearInterval(autoPlayInterval);
  }
  
  // å½“æ‰“å¼€ç›¸å†Œæ—¶å¼€å§‹è‡ªåŠ¨æ’­æ”¾
  const galleryOverlay = document.getElementById('galleryOverlay');
  galleryOverlay.addEventListener('transitionend', function() {
    if (this.classList.contains('show')) {
      startAutoPlay();
    } else {
      stopAutoPlay();
    }
  });
  
  // é”®ç›˜æ§åˆ¶
  document.addEventListener('keydown', function(e) {
    if (document.getElementById('galleryOverlay').classList.contains('show')) {
      if (e.key === 'ArrowLeft') {
        changeSlide(-1);
      } else if (e.key === 'ArrowRight') {
        changeSlide(1);
      }
    }
  });
  
  // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
  let touchStartX = 0;
  let touchEndX = 0;
  
  const photoSlider = document.querySelector('.photo-slider');
  
  photoSlider.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
  });
  
  photoSlider.addEventListener('touchend', function(e) {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  });
  
  function handleSwipe() {
    if (touchEndX < touchStartX - 50) {
      changeSlide(1); // å‘å·¦æ»‘åŠ¨
    }
    if (touchEndX > touchStartX + 50) {
      changeSlide(-1); // å‘å³æ»‘åŠ¨
    }
  }
  
  // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šå¤„ç†è®¾å¤‡æ–¹å‘å˜åŒ–
  let orientationChangeTimeout;
  window.addEventListener('orientationchange', function() {
    clearTimeout(orientationChangeTimeout);
    orientationChangeTimeout = setTimeout(function() {
      // é‡æ–°è®¡ç®—canvaså¤§å°
      const canvas = document.getElementById('pinkboard');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      
      // é‡æ–°å®šä½å…ƒç´ 
      updateSlidePosition();
    }, 300);
  });
  
  // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šå¤„ç†çª—å£å¤§å°å˜åŒ–
  let resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(function() {
      updateSlidePosition();
    }, 200);
  });
  
  // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šé˜²æ­¢åŒå‡»æ”¾å¤§
  let lastTouchEnd = 0;
  document.addEventListener('touchend', function(event) {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) {
      event.preventDefault();
    }
    lastTouchEnd = now;
  }, { passive: false });
  
  // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šä¼˜åŒ–å›¾ç‰‡åŠ è½½
  if ('loading' in HTMLImageElement.prototype) {
    const images = document.querySelectorAll('img[loading="lazy"]');
    images.forEach(img => {
      img.src = img.dataset.src;
    });
  } else {
    // å¯¹äºä¸æ”¯æŒlazy loadingçš„æµè§ˆå™¨ï¼Œä½¿ç”¨Intersection Observer
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src || img.src;
          observer.unobserve(img);
        }
      });
    });
    
    document.querySelectorAll('.photo-slide img').forEach(img => {
      imageObserver.observe(img);
    });
  }
  
  // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šæ£€æµ‹ç½‘ç»œçŠ¶æ€
  function checkNetworkSpeed() {
    if ('connection' in navigator) {
      const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      if (connection) {
        // åœ¨æ…¢é€Ÿç½‘ç»œä¸‹å‡å°‘åŠ¨ç”»
        if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
          document.body.classList.add('reduce-motion');
        }
      }
    }
  }
  
  // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œä¼˜åŒ–
  window.addEventListener('load', function() {
    checkNetworkSpeed();
    
    // é¢„åŠ è½½å›¾ç‰‡
    const imageUrls = ['rose.jpg', 'together.jpg'];
    imageUrls.forEach(url => {
      const img = new Image();
      img.src = url;
    });
    
    // æ·»åŠ åŠ è½½åŠ¨ç”»å®Œæˆæ ‡è®°
    document.body.classList.add('loaded');
  });
  
  // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šä½ç”µé‡æ¨¡å¼æ£€æµ‹
  if ('getBattery' in navigator) {
    navigator.getBattery().then(function(battery) {
      function updateBatteryStatus() {
        if (battery.level < 0.2 && !battery.charging) {
          // ä½ç”µé‡æ¨¡å¼ï¼šå‡å°‘åŠ¨ç”»
          document.body.classList.add('low-battery');
        } else {
          document.body.classList.remove('low-battery');
        }
      }
      
      battery.addEventListener('levelchange', updateBatteryStatus);
      battery.addEventListener('chargingchange', updateBatteryStatus);
      updateBatteryStatus();
    });
  }
  
  // æä¾›è§†è§‰åé¦ˆ
  document.querySelectorAll('.photo-button, .slider-nav, .close-letter, .close-gallery').forEach(button => {
    button.addEventListener('touchstart', function() {
      this.style.transform = 'scale(0.95)';
    });
    button.addEventListener('touchend', function() {
      this.style.transform = '';
    });
  });
</script>
</body>
</html>
